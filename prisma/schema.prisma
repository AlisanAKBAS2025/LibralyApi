generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Book {
  id          Int           @id @default(autoincrement())
  name        String
  pageCount   Int
  publishYear Int?
  status      ReadingStatus @default(TO_READ)
  rating      Int?
  review      String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  author_id Int
  author    Author @relation(fields: [author_id], references: [id])

  booksCategories BooksCategories[]
}

enum ReadingStatus {
  TO_READ
  READING
  COMPLETED
}

model Author {
  id      Int     @id @default(autoincrement())
  name    String
  bio     String?
  country String?
  books   Book[]
}

model Category {
  id              Int               @id @default(autoincrement())
  name            String
  booksCategories BooksCategories[]
}

model BooksCategories {
  id Int @id @default(autoincrement())

  book    Book @relation(fields: [book_id], references: [id])
  book_id Int

  category    Category @relation(fields: [category_id], references: [id])
  category_id Int
}
